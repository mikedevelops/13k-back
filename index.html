<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>13k</title><style>*{margin:0;padding:0}body,html{background-color:#000;width:100%;height:100%;display:flex}canvas{margin:auto}</style></head><body> <canvas id="stage"></canvas> <canvas style="display:none" id="static"></canvas> <script>parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"CPW7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LEVEL_COMPLETE=exports.LEVEL_ACTIVE=exports.LEVEL_START=exports.LEVEL_INTRO=exports.LEVEL_REVEAL=exports.LEVEL_SELECT=exports.LEVEL_PADDING=exports.RESOLUTION=exports.UNIT=exports.DIRECTION_RIGHT=exports.DIRECTION_UP=exports.DIRECTION_DOWN=exports.DIRECTION_LEFT=void 0;var E=[-1,0];exports.DIRECTION_LEFT=E;var L=[0,1];exports.DIRECTION_DOWN=L;var r=[0,-1];exports.DIRECTION_UP=r;var e=[1,0];exports.DIRECTION_RIGHT=e;var T=16;exports.UNIT=T;var t=[16,9];exports.RESOLUTION=t;var o=[1,1];exports.LEVEL_PADDING=o;var s="LEVEL_SELECT";exports.LEVEL_SELECT=s;var I="LEVEL_REVEAL";exports.LEVEL_REVEAL=I;var _="LEVEL_INTRO";exports.LEVEL_INTRO=_;var p="LEVEL_START";exports.LEVEL_START=p;var x="LEVEL_ACTIVE";exports.LEVEL_ACTIVE=x;var V="LEVEL_COMPLETE";exports.LEVEL_COMPLETE=V;
},{}],"ANqD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HIDDEN_CTX=exports.hiddenStage=exports.STAGE_CTX=exports.stage=void 0;var e=require("../game/constants"),t=2,o=document.getElementById("stage");exports.stage=o;var s=o.getContext("2d");exports.STAGE_CTX=s;var r=document.getElementById("static");exports.hiddenStage=r;var a=r.getContext("2d");exports.HIDDEN_CTX=a,o.width=e.RESOLUTION[0]*e.UNIT*t,o.height=e.RESOLUTION[1]*e.UNIT*t,s.imageSmoothingEnabled=!1,s.scale(t,t);
},{"../game/constants":"CPW7"}],"uCd6":[function(require,module,exports) {
module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAAQCAYAAADOMaw4AAAFB0lEQVR4nO2dsU4cMRCGvVG64w2gobwiBSURJVIioONeAfIKASFFSBHwCsArQAeISJQnKK9IQUkDb8DVmyaDfIPHHq/Huz52PinKntez9t5651/Pjo/K9JxvX9bqFPs/f8eVVF+U9tHrryhKV3yWOMjk/vadE1v5+r2Ccnsb1/Edd399oz66u2nFwZ2cHkTV//njt7N8cn9bh85LmWXt4vFtbIxHQ+93F6pLjZnQWJK6/oqi9Ivd1ZXaGGPOHiYVLgNc+84eJpWIAEuDnWWMEL9eLdYLWy/OutQ+cL5cp3pyemBOTg+yiHCT/ksi0b7rYcsY/wNXSHhxPVuIbWCc7K9v1HYZR3ylrr+idAV17wEhv/R6tei1z+1/5hVbYF2f8T4QYREBpi6qXR4z26X+p+pLAM4UHKvtYHEZbGNKmP12LeCT+9u6q+gAiC41XmDbtV/i+gO2E2xyvk0eYCTtFUXh4xPbkI1oCJoKNdvg0LS9L0ZUXfVCT29QR1qEqPOJpav+d90+d/abamPT1uuN2IcO3/3DOVaqvTJ/hHwuVRfGAue+B+y62A9AVIq6N0vf3wXFhKCP7m4qe5ZijHtG45vldIXrwaPJO+9UuhZwjiPIIQIcMcX7c44fOL8Yx0gdA4g9Vqq9Ml9wxxxVD3wCNwSN61GvhFysXTzWWAS7treP0aaAi4egOc6VqkM5RXCwWKAxC1svFQwMPEBg4PjEB8KK+H9c5gqx2udE3QQh8Untvw1l76Np+/b5+sKzsE8qYgC4XlXgsYTHjmuspVx/KVK/E53hKl0xHg0rECksiLGiRdnbbUi2j+v77LGA766u1LFhaLApOguaEl1KqGF253qKs/dRYiTlWF1hds4MJLX/sJ+yhzo52odz9gkUiBjnVUUsLoGNjZaUklQl8d10EYFR+guIHyWQ9j6XGHZtj+tyyiT4lOOgsfhmtjGhQ0o8AE74NTT7yUlq/7kh6FztA5AljP8pYXziqwKqlIxvdmoMHfotwT5mhl50CJoq9zkP7vu72Pd223vL5vL46d12TvCs3+VQQ6Hopv0OCSjUYR0sgtgZbVvJQL6QdOlIh6JhLKqIfzxi7j/X6x+O3wA4kTRgcLhjpr/O323nskslJOBQR7LNorKgbWKzVGOSi9pajoPL8Hti+3Nq/6XtfQ8BLvsYJ5BDBDhLj+yQdJs/8tIm0u/XlfmAk4MSyj+BbUqM52kNcJsi3vkyJAlshxhKtuJyefxktveW37ZD5EjCcd0YIecY2+++40rSi82KLo1ca4GVjw/OO4l9GMOZzhzhdYV3p7/OzeBw523bV9cuo+y49k36mmrflKKyoF0/xuGrw8EWsNBAkkjCcZ1bzI0w2HyuptdLdVPhBftGxhZNHgK4ERBc1mRA2zali2mb+K6Bzor7AbUkknv98Qw4RogxtoBy7nEIA6fOWF0iXtL6X6CYLOiYrFWXCOPB4RosEDoNLUUK/RISl5iBD32aXi/Vg83nqqpmTXwL4CXtZz+//N8O2xszG1bH19suzyUEpc16m5ynxHejQttfUn+IpWkSJhY3ap3teDSsqCxmu47L1ndsb/ujIbt96rOv/c6XIUnB+clJ7nrgHP2LpelyGyyexsQlSqTaUwIdsudEQqhy7iJ3znIAGDOutcA6W1Y+MqkPXxK+M8dMk5MgJdW+b5kTZYNFmPPHGIwxpvfOSP8cXb/R668oSlf8A0XkmyDLxBQdAAAAAElFTkSuQmCC";
},{}],"XvJ1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.V_ZERO=exports.V_WEST=exports.V_SOUTH=exports.V_EAST=exports.V_NORTH=exports.equals=exports.subtractVector=exports.addVector=void 0;var r=function(r,t){return[r[0]+t[0],r[1]+t[1]]};exports.addVector=r;var t=function(r,t){return[r[0]-t[0],r[1]-t[1]]};exports.subtractVector=t;var e=function(r,t){return r[0]===t[0]&&r[1]===t[1]};exports.equals=e;var o=[0,-1];exports.V_NORTH=o;var s=[1,0];exports.V_EAST=s;var p=[0,1];exports.V_SOUTH=p;var x=[-1,0];exports.V_WEST=x;var a=[0,0];exports.V_ZERO=a;
},{}],"CdRP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PLAYER_SPRITE_MAP=exports.HERO_SPRITE_MAP=exports.S_NUMBERS=exports.S_PLAYER_N=exports.S_PLAYER_S=exports.S_PLAYER_W=exports.S_PLAYER_E=exports.S_TROPHY_COMPLETE=exports.S_TROPHY=exports.S_DOORWAY_EXIT=exports.S_GROUND_TILE=exports.S_INVENTORY_SLOT=exports.S_POT=exports.S_HERO_S=exports.S_HERO_N=exports.S_HERO_W=exports.S_SKELETON_REMAINS=exports.S_DOORWAY=exports.S_HERO_E=exports.S_GROUND_VARIANT_1=exports.S_WALL=exports.S_GROUND=exports.drawSprite=exports.clearSprite=exports.SPRITE_REF=exports.SPRITE_SIZE=void 0;var r,e,_=o(require("../../assets/sprites.png")),t=require("../game/constants"),S=require("../utils/vector");function o(r){return r&&r.__esModule?r:{default:r}}function s(r,e,_){return e in r?Object.defineProperty(r,e,{value:_,enumerable:!0,configurable:!0,writable:!0}):r[e]=_,r}var p=16;exports.SPRITE_SIZE=p;var E=document.createElement("img");exports.SPRITE_REF=E,E.src=_.default;var R=function(r,e){r.clearRect(e[0],e[1],p,p)};exports.clearSprite=R;var x=function(r,e,_){0===e&&(e=T);var S=[16*e,0];r.drawImage(E,S[0],S[1],p,p,_[0],_[1],t.UNIT,t.UNIT)};exports.drawSprite=x;var a=0;exports.S_GROUND=a;var O=1;exports.S_WALL=O;var T=2;exports.S_GROUND_VARIANT_1=T;var v=3;exports.S_HERO_E=v;var P=4;exports.S_DOORWAY=P;var A=5;exports.S_SKELETON_REMAINS=A;var N=6;exports.S_HERO_W=N;var I=7;exports.S_HERO_N=I;var L=8;exports.S_HERO_S=L;var i=9;exports.S_POT=i;var n=10;exports.S_INVENTORY_SLOT=n;var u=11;exports.S_GROUND_TILE=u;var Y=12;exports.S_DOORWAY_EXIT=Y;var H=23;exports.S_TROPHY=H;var c=24;exports.S_TROPHY_COMPLETE=c;var l=25;exports.S_PLAYER_E=l;var M=26;exports.S_PLAYER_W=M;var U=27;exports.S_PLAYER_S=U;var V=28;exports.S_PLAYER_N=V;var W=13;exports.S_NUMBERS=W;var d=(s(r={},S.V_NORTH,I),s(r,S.V_EAST,v),s(r,S.V_SOUTH,L),s(r,S.V_WEST,N),r);exports.HERO_SPRITE_MAP=d;var D=(s(e={},S.V_NORTH,V),s(e,S.V_EAST,l),s(e,S.V_SOUTH,U),s(e,S.V_WEST,M),e);exports.PLAYER_SPRITE_MAP=D;var f=s({},a,[0,2]);
},{"../../assets/sprites.png":"uCd6","../game/constants":"CPW7","../utils/vector":"XvJ1"}],"Ajd9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randInt=exports.getUnit=void 0;var r=require("../game/constants"),t=function(t){return Array.isArray(t)?[t[0]*r.UNIT,t[1]*r.UNIT]:t*r.UNIT};exports.getUnit=t;var e=function(r,t){return r=Math.ceil(r),t=Math.floor(t),Math.floor(Math.random()*(t-r+1))+r};exports.randInt=e;
},{"../game/constants":"CPW7"}],"/IRI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.actor=void 0;var t=require("../utils/units"),i=require("../utils/vector"),e=require("../stage/stage"),n=require("../sprite/sprites"),o={id:null,position:[0,0],direction:i.V_EAST,lateUpdateCallback:null,spriteMap:null,inventory:null,getWorldPosition:function(){return this.position.map(function(i){return(0,t.getUnit)(i)})},draw:function(){(0,n.drawSprite)(e.STAGE_CTX,this.spriteMap[this.direction],this.getWorldPosition())},update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.position;this.position=t,this.draw(),this.lateUpdate()},lateUpdate:function(){null!==this.lateUpdateCallback&&this.lateUpdateCallback()},move:function(t,e){if((0,i.equals)(e,this.direction)){var o=(0,i.addVector)(this.position,e);if(t.canMoveToPosition(o)){var s=t.getEntityAt(o);if(this.direction=e,this.position=o,s.id===n.S_DOORWAY_EXIT){var r=new CustomEvent("actor_exit",{detail:this.id});stage.dispatchEvent(r)}}}else this.direction=e},pickup:function(t){var e=(0,i.addVector)(this.position,this.direction),n=t.getEntityAt(e);null!==n&&n.canPickup()&&(t.removeEntityAt(e),this.inventory.addItem(n))},place:function(t){var e=(0,i.addVector)(this.position,this.direction),n=this.inventory.getItem();t.canMoveToPosition(e)&&null!==n&&(t.addEntityAt(e,n),this.inventory.removeItem())},action:function(t){null===this.inventory.getItem()?this.pickup(t):this.place(t)},hide:function(){(0,n.clearSprite)(e.STAGE_CTX,(0,t.getUnit)(this.position))}};exports.actor=o;
},{"../utils/units":"Ajd9","../utils/vector":"XvJ1","../stage/stage":"ANqD","../sprite/sprites":"CdRP"}],"Nj4q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInventory=void 0;var t=require("../utils/units"),e=require("../sprite/sprites"),i=require("../stage/stage"),s=function(){return{item:null,slotPosition:[0,4],addItem:function(t){null!==this.item?(this.item.place(t.position),this.item=t):this.item=t},draw:function(){(0,e.drawSprite)(i.STAGE_CTX,e.S_INVENTORY_SLOT,(0,t.getUnit)(this.slotPosition)),null!==this.item&&(this.item.position=(0,t.getUnit)(this.slotPosition),this.item.draw())},getItem:function(){return this.item},removeItem:function(){this.item=null}}};exports.createInventory=s;
},{"../utils/units":"Ajd9","../sprite/sprites":"CdRP","../stage/stage":"ANqD"}],"r8ty":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPlayer=void 0;var e=require("../actors/actor"),r=require("../sprite/sprites"),t=require("../inventory/inventory"),a=function(){var a=(0,t.createInventory)(),i=Object.create(e.actor);return i.spriteMap=r.PLAYER_SPRITE_MAP,i.inventory=a,i.lateUpdateCallback=function(){this.inventory.draw()},i};exports.createPlayer=a;
},{"../actors/actor":"/IRI","../sprite/sprites":"CdRP","../inventory/inventory":"Nj4q"}],"G0uM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=void 0;var e=function(e,t,i){return{position:[e,t],entities:i}};exports.tile=e;
},{}],"71XU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createItem=void 0;var t=require("../sprite/sprites"),r=require("../stage/stage");function e(t,r){return o(t)||n(t,r)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(t,r){var e=[],i=!0,n=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done)&&(e.push(a.value),!r||e.length!==r);i=!0);}catch(s){n=!0,o=s}finally{try{i||null==u.return||u.return()}finally{if(n)throw o}}return e}function o(t){if(Array.isArray(t))return t}var a=function(i,n){return{position:n,id:i,place:function(t){var r=e(t,2),i=r[0],n=r[1];this.position=[i,n],this.draw()},draw:function(){(0,t.drawSprite)(r.STAGE_CTX,this.id,this.position)},canPickup:function(){switch(this.id){case t.S_POT:return!0;default:return!1}}}};exports.createItem=a;
},{"../sprite/sprites":"CdRP","../stage/stage":"ANqD"}],"OBq/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.entityArraysEqual=void 0;var r=require("../sprite/sprites"),t=function(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var i=t.concat().sort(),s=e.concat().sort(),a=0;a<i.length;a++)if((i[a].id!==r.S_DOORWAY||s[a].id!==r.S_DOORWAY_EXIT)&&i[a].id!==s[a].id)return!1;return!0};exports.entityArraysEqual=t;
},{"../sprite/sprites":"CdRP"}],"SFgd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLevel=void 0;var t=require("./tile"),e=require("../sprite/sprites"),i=require("../items/item"),n=require("../stage/stage"),r=require("../utils/units"),a=require("../utils/entities"),s=require("../index"),o=require("../game/constants");function u(t,e){return h(t)||l(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(u){r=!0,a=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return i}function h(t){if(Array.isArray(t))return t}var v=function(){return{resolution:null,currentState:null,cachedState:null,countdown:1,active:!1,exitPosition:null,exitOpen:!1,finished:!1,playerStartPosition:null,heroStartPosition:null,cachedStartState:null,instructions:[],instructionIndex:0,introState:null,cachedIntroState:null,reset:function(){this.currentState=this.cachedStartState,this.introState=this.cachedIntroState,this.exitOpen=!1,this.instructionIndex=0},load:function(t,e,i,n,r,a,s){this.resolution=n,this.introState=this.createState(a),this.cachedIntroState=this.createState(a),this.cachedState=this.createState(t),this.cachedStartState=this.createState(e),this.currentState=this.createState(e),this.playerStartPosition=i,this.instructions=r,this.heroStartPosition=s},createState:function(n){for(var r=this,a=[],s=0;s<this.resolution[1];s++){for(var o=function(o){var u=n[s*r.resolution[1]+o],c=[o,s],l=[],h=Array.isArray(u)?u[0]:u,v=Array.isArray(u)?u[u.length-1]:u;switch(void 0===a[o]&&(a[o]=[]),h){case e.S_GROUND:case e.S_GROUND_TILE:break;default:l.push((0,i.createItem)(e.S_GROUND,c))}v===e.S_DOORWAY&&(r.exitPosition=c),Array.isArray(u)?u.forEach(function(t){return l.push((0,i.createItem)(t,c))}):l.push((0,i.createItem)(u,c)),a[o][s]=(0,t.tile)(o,s,l),0},u=0;u<this.resolution[0];u++)o(u);0}return a},getEntityAt:function(t){var e=u(t,2),i=e[0],n=e[1],r=this.getTileAt([i,n]);if(null===r)return null;var a=r.entities[r.entities.length-1];return void 0===a?null:a},getTileAt:function(t){var e=u(t,2),i=e[0],n=e[1],r=this.currentState;switch(s.GAME_STATE){case o.LEVEL_REVEAL:case o.LEVEL_INTRO:r=this.introState}var a=r[i][n];return void 0===r[i]?null:void 0===r[i][n]?null:a},removeEntityAt:function(t){var e=this.getTileAt(t);if(null===e)return null;e.entities.pop()},addEntityAt:function(t,e){var i=this.getTileAt(t);null!==i&&i.entities.push(e)},replaceEntityAt:function(t,e){var i=this.getTileAt(t);if(null===i)return null;i.entities[i.entities.length-1]=e},canMoveToPosition:function(t){var i=u(t,2),n=i[0],r=i[1],a=this.getEntityAt([n,r]);if(null===a)return!1;switch(a.id){case e.S_WALL:case e.S_POT:case e.S_DOORWAY:return!1;default:return!0}},iterate:function(t,e){for(var i=0;i<this.resolution[0];i++)for(var n=0;n<this.resolution[1];n++)e(t[i][n])},draw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentState;this.iterate(t,function(t){t.entities.forEach(function(i){(0,e.drawSprite)(n.STAGE_CTX,i.id,(0,r.getUnit)(t.position))})})},reveal:function(){var t=this;this.draw(this.cachedState);var e=setInterval(function(){if(0===t.countdown){var i=new CustomEvent("reveal_finished");return clearInterval(e),t.active=!0,void n.stage.dispatchEvent(i)}var r=new CustomEvent("countdown");r.data=t.countdown,n.stage.dispatchEvent(r),t.countdown--},1e3)},update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentState;this.draw(t)},isComplete:function(){var t=this,e=!0;return this.iterate(this.currentState,function(i){if(e){var n=t.getTileAt(i.position,t.cachedState);(0,a.entityArraysEqual)(n.entities,i.entities)||(e=!1)}}),e},complete:function(){if(!this.exitOpen){var t=(0,i.createItem)(e.S_DOORWAY_EXIT,this.exitPosition);this.replaceEntityAt(t.position,t),this.exitOpen=!0;var r=new CustomEvent("open_exit");n.stage.dispatchEvent(r)}},inComplete:function(){if(this.exitOpen){var t=(0,i.createItem)(e.S_DOORWAY,this.exitPosition);this.replaceEntityAt(t.position,t),this.exitOpen=!1;var r=new CustomEvent("close_exit");n.stage.dispatchEvent(r)}},getNextInstruction:function(){var t=this.instructions[this.instructionIndex];return void 0===t?null:(this.instructionIndex++,t)}}};exports.createLevel=v;
},{"./tile":"G0uM","../sprite/sprites":"CdRP","../items/item":"71XU","../stage/stage":"ANqD","../utils/units":"Ajd9","../utils/entities":"OBq/","../index":"Focm","../game/constants":"CPW7"}],"+Cjg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.levelManager=void 0;var e=require("../grid/level"),t=require("../sprite/sprites"),i=require("../stage/stage"),r=require("../utils/units"),l=function(){return{levels:[],highlighted:0,load:function(t){var i=this;t.forEach(function(t){var r=(0,e.createLevel)();r.load(t.complete,t.start,t.player,t.resolution,t.instructions,t.intro,t.hero),i.levels.push(r)})},draw:function(){for(var e=0;e<this.levels.length;e++)(0,t.drawSprite)(i.STAGE_CTX,t.S_NUMBERS+e,[(0,r.getUnit)(e),0]),(0,t.drawSprite)(i.STAGE_CTX,this.levels[e].finished?t.S_TROPHY_COMPLETE:t.S_TROPHY,[(0,r.getUnit)(e),t.SPRITE_SIZE]);(0,t.drawSprite)(i.STAGE_CTX,t.S_INVENTORY_SLOT,[(0,r.getUnit)(this.highlighted),0])},nextLevel:function(){this.highlighted<this.levels.length-1&&this.highlighted++},prevLevel:function(){this.highlighted>0&&this.highlighted--},getCurrentLevel:function(){return this.levels[this.highlighted]}}};exports.levelManager=l;
},{"../grid/level":"SFgd","../sprite/sprites":"CdRP","../stage/stage":"ANqD","../utils/units":"Ajd9"}],"d/P8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.I_MOVE_WEST=exports.I_ACTION=exports.I_MOVE_SOUTH=exports.I_MOVE_EAST=exports.I_MOVE_NORTH=void 0;var _=0;exports.I_MOVE_NORTH=_;var e=1;exports.I_MOVE_EAST=e;var r=2;exports.I_MOVE_SOUTH=r;var t=3;exports.I_ACTION=t;var O=4;exports.I_MOVE_WEST=O;
},{}],"xCfU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.levels=void 0;var e=require("../instructions/instructions"),_=[{instructions:[e.I_MOVE_EAST,e.I_MOVE_SOUTH,e.I_ACTION,e.I_MOVE_WEST,e.I_MOVE_WEST,e.I_MOVE_SOUTH,e.I_ACTION,e.I_MOVE_EAST,e.I_MOVE_EAST,e.I_MOVE_EAST],resolution:[4,4],hero:[1,1],player:[1,1],intro:[1,1,1,1,1,0,0,12,1,0,[11,9],1,1,1,1,1],complete:[1,1,1,1,1,0,0,4,1,0,[11,9],1,1,1,1,1],start:[1,1,1,1,1,0,0,4,1,9,11,1,1,1,1,1]}];exports.levels=_;
},{"../instructions/instructions":"d/P8"}],"IUbt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHero=void 0;var e=require("./actor"),r=require("../sprite/sprites"),t=require("../inventory/inventory"),o=function(){var o=(0,t.createInventory)(),i=Object.create(e.actor);return i.inventory=o,i.spriteMap=r.HERO_SPRITE_MAP,i};exports.createHero=o;
},{"./actor":"/IRI","../sprite/sprites":"CdRP","../inventory/inventory":"Nj4q"}],"Focm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GAME_STATE=void 0;var e=require("./game/constants"),t=require("./stage/stage"),E=require("./sprite/sprites"),r=require("./actors/player"),n=require("./managers/levelManager"),i=require("./game/levels"),a=require("./instructions/instructions"),s=require("./actors/hero"),o=require("./utils/vector"),L=require("./utils/units"),T=(0,n.levelManager)(),c=(0,r.createPlayer)(),_=(0,s.createHero)(),u=e.LEVEL_SELECT;exports.GAME_STATE=u;var l=function(){t.STAGE_CTX.fillStyle="black",t.STAGE_CTX.fillRect(0,0,t.stage.width,t.stage.height),E.SPRITE_REF.addEventListener("load",function(){T.load(i.levels),V()})},d=null,v=function(e,t){if(null!==e){switch(e){case a.I_MOVE_NORTH:_.move(t,o.V_NORTH);break;case a.I_MOVE_EAST:_.move(t,o.V_EAST);break;case a.I_MOVE_SOUTH:_.move(t,o.V_SOUTH);break;case a.I_MOVE_WEST:_.move(t,o.V_WEST);break;case a.I_ACTION:_.action(t)}_.update(),d=setTimeout(V,(0,L.randInt)(150,500))}},V=function E(r){t.STAGE_CTX.clearRect(0,0,t.stage.width,t.stage.height),t.STAGE_CTX.fillStyle="#472d3c",t.STAGE_CTX.fillRect(0,0,t.hiddenStage.width,t.hiddenStage.height);var n=T.getCurrentLevel();switch(u){case e.LEVEL_SELECT:T.draw();break;case e.LEVEL_REVEAL:n.reveal(),_.position=n.heroStartPosition;break;case e.LEVEL_INTRO:n.update(n.introState),v(n.getNextInstruction(),n);break;case e.LEVEL_START:c.position=n.playerStartPosition,exports.GAME_STATE=u=e.LEVEL_ACTIVE,E();break;case e.LEVEL_ACTIVE:A(),c.update();break;case e.LEVEL_COMPLETE:exports.GAME_STATE=u=e.LEVEL_SELECT,E()}},A=function(){var e=T.getCurrentLevel();e.update(),e.isComplete()?e.complete():e.inComplete()},C=[];C[68]=function(){switch(u){case e.LEVEL_SELECT:T.nextLevel();break;case e.LEVEL_ACTIVE:c.move(T.getCurrentLevel(),e.DIRECTION_RIGHT)}},C[65]=function(){switch(u){case e.LEVEL_SELECT:T.prevLevel();break;case e.LEVEL_ACTIVE:c.move(T.getCurrentLevel(),e.DIRECTION_LEFT)}},C[13]=function(){u===e.LEVEL_SELECT&&(exports.GAME_STATE=u=e.LEVEL_REVEAL)},C[83]=function(){switch(u){case e.LEVEL_ACTIVE:c.move(T.getCurrentLevel(),e.DIRECTION_DOWN)}},C[87]=function(){switch(u){case e.LEVEL_ACTIVE:c.move(T.getCurrentLevel(),e.DIRECTION_UP)}},C[69]=function(){switch(u){case e.LEVEL_ACTIVE:c.action(T.getCurrentLevel())}},window.addEventListener("keydown",function(e){void 0!==C[e.keyCode]&&(C[e.keyCode](),V())}),t.stage.addEventListener("countdown",function(e){console.log(e)}),t.stage.addEventListener("reveal_finished",function(t){exports.GAME_STATE=u=e.LEVEL_INTRO,V()}),t.stage.addEventListener("start",function(t){exports.GAME_STATE=u=e.LEVEL_START,V()}),t.stage.addEventListener("open_exit",function(e){V()}),t.stage.addEventListener("close_exit",function(e){V()}),t.stage.addEventListener("actor_exit",function(t){if(u===e.LEVEL_INTRO)return exports.GAME_STATE=u=e.LEVEL_START,_.position=[100,100],void setTimeout(V,3e3);exports.GAME_STATE=u=e.LEVEL_COMPLETE,T.getCurrentLevel().finished=!0,T.getCurrentLevel().reset(),V()}),l();
},{"./game/constants":"CPW7","./stage/stage":"ANqD","./sprite/sprites":"CdRP","./actors/player":"r8ty","./managers/levelManager":"+Cjg","./game/levels":"xCfU","./instructions/instructions":"d/P8","./actors/hero":"IUbt","./utils/vector":"XvJ1","./utils/units":"Ajd9"}]},{},["Focm"], null)</script>
</body></html>