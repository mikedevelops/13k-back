<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>13k</title><style>*{margin:0;padding:0}body,html{background-color:#000;width:100%;height:100%;display:flex}canvas{margin:auto}</style></head><body> <canvas id="stage"></canvas> <canvas style="display:none" id="static"></canvas> <script>parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"uCd6":[function(require,module,exports) {
module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAAAQCAYAAAC2q/WwAAACsklEQVRoge1aMW5CMQzNr7q1N6ALR+jamaGi3TgEVwDEiGivwCHYKGJgZuUILO0N6JxOroyxEyfxh1/1PwkpTezEcfwd26lzLVr8YVQWk+x3G0/7Hp+eK+jHbUoTmnfS6/v5dm0iYwycfCFIsu93Gx/bV4tTYN3HdEdpb+sULBfUcFMM+bjq+PvXL5ZWGsMfmmaN/W7jQ4ZaYsQ58lvCYn3JGYR0otUX0KU6nNox6fWTBJLoj6uOOI80hpUBbW2fNE8ucuRvEn9IB9JYjt6Ax8QDx0IFDBpa4LEUT8vRaQ/I2oulenAJ15L/2uvn6A14biwFKQFnkJNe31NPy/VdG9wBQJiBf3XLUephS6HZo7UeGp1sYEOdb9cV/ZvjAQ9BDwr6pBhYc3sAgDYUA4d4Q3PnyI95MS3HD23L9fF+R8OZe19M2bnpmEWyaxpCYFhUIajR4n6OXlI+HZMO0Kp6wIVJmo+jVH4Yl/iBpo71Yc/vi6kbDWfs/GC8Kc4ihkZUIUKxr9bzOsd7HgxN/Ia9MTa+mNe1QKn8pTGshf6cc6IHrgMmBiwdKu4PHXwscYPx1JrwYNx1y7fDWbtO0FtHqlaE9JErd8wAgUY1WQJSPaqlIzBJ4vBBcckLTWQ0SU1qopaSnNSZyABiIRMdL5Xfmn8w7rJtiT/FIC1vsUaEEM6dhhFWVYbl2+FX+RovRuu9Ui0497C05bZUuf8zzEMIzeFKNNiIpXAh9XkZG0Ds+rTwDFJJTTv/3ctn9f3x4HMNF/izmBFyPiLtOwDtywkpTPMRTaigqYtqPG+sDixl4TAmyU/bOS9x3Lyp2fZx1fHen7OE9mXNL4UYMX6qH+6srV4wgacxDxnOyY8ZMRqKuv9fQItcD1FV52wpeyrl52g1/PQmxj+OBkP7sV/qUahFi4vgB0KmT7u5WPjHAAAAAElFTkSuQmCC";
},{}],"CPW7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RESOLUTION=exports.UNIT=exports.DIRECTION_RIGHT=exports.DIRECTION_UP=exports.DIRECTION_DOWN=exports.DIRECTION_LEFT=void 0;var r=[-1,0];exports.DIRECTION_LEFT=r;var I=[0,1];exports.DIRECTION_DOWN=I;var e=[0,-1];exports.DIRECTION_UP=e;var t=[1,0];exports.DIRECTION_RIGHT=t;var o=16;exports.UNIT=o;var s=[16,9];exports.RESOLUTION=s;
},{}],"Ajd9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randInt=exports.getUnit=void 0;var r=require("../game/constants"),t=function(t){return Array.isArray(t)?[t[0]*r.UNIT,t[1]*r.UNIT]:t*r.UNIT};exports.getUnit=t;var e=function(r,t){return r=Math.ceil(r),t=Math.floor(t),Math.floor(Math.random()*(t-r+1))+r};exports.randInt=e;
},{"../game/constants":"CPW7"}],"XvJ1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.V_ZERO=exports.V_WEST=exports.V_SOUTH=exports.V_EAST=exports.V_NORTH=exports.equals=exports.subtractVector=exports.addVector=void 0;var r=function(r,t){return[r[0]+t[0],r[1]+t[1]]};exports.addVector=r;var t=function(r,t){return[r[0]-t[0],r[1]-t[1]]};exports.subtractVector=t;var e=function(r,t){return r[0]===t[0]&&r[1]===t[1]};exports.equals=e;var o=[0,-1];exports.V_NORTH=o;var s=[1,0];exports.V_EAST=s;var p=[0,1];exports.V_SOUTH=p;var x=[-1,0];exports.V_WEST=x;var a=[0,0];exports.V_ZERO=a;
},{}],"CdRP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PLAYER_SPRITE_MAP=exports.S_INVENTORY_SLOT=exports.S_POT=exports.S_PLAYER_S=exports.S_PLAYER_N=exports.S_PLAYER_W=exports.S_SKELETON_REMAINS=exports.S_DOORWAY=exports.S_PLAYER_E=exports.S_GROUND_VARIANT_1=exports.S_WALL=exports.S_GROUND=exports.drawSprite=exports.SPRITE_REF=void 0;var r,e=o(require("../../assets/sprites.png")),t=require("../game/constants"),_=require("../utils/units"),s=require("../utils/vector");function o(r){return r&&r.__esModule?r:{default:r}}function S(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var p=document.createElement("img");exports.SPRITE_REF=p,p.src=e.default;var a=function(r,e,_){0===e&&(e=R);var s=[16*e,0];r.drawImage(p,s[0],s[1],16,16,_[0],_[1],t.UNIT,t.UNIT)};exports.drawSprite=a;var x=0;exports.S_GROUND=x;var E=1;exports.S_WALL=E;var R=2;exports.S_GROUND_VARIANT_1=R;var A=3;exports.S_PLAYER_E=A;var u=4;exports.S_DOORWAY=u;var i=5;exports.S_SKELETON_REMAINS=i;var v=6;exports.S_PLAYER_W=v;var O=7;exports.S_PLAYER_N=O;var P=8;exports.S_PLAYER_S=P;var T=9;exports.S_POT=T;var n=10;exports.S_INVENTORY_SLOT=n;var N=(S(r={},s.V_NORTH,O),S(r,s.V_EAST,A),S(r,s.V_SOUTH,P),S(r,s.V_WEST,v),r);exports.PLAYER_SPRITE_MAP=N;var L=S({},x,[0,2]);
},{"../../assets/sprites.png":"uCd6","../game/constants":"CPW7","../utils/units":"Ajd9","../utils/vector":"XvJ1"}],"ANqD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HIDDEN_CTX=exports.hiddenStage=exports.STAGE_CTX=exports.stage=void 0;var e=require("../game/constants"),t=2,o=document.getElementById("stage");exports.stage=o;var s=o.getContext("2d");exports.STAGE_CTX=s;var r=document.getElementById("static");exports.hiddenStage=r;var a=r.getContext("2d");exports.HIDDEN_CTX=a,o.width=e.RESOLUTION[0]*e.UNIT*t,o.height=e.RESOLUTION[1]*e.UNIT*t,s.imageSmoothingEnabled=!1,s.scale(t,t);
},{"../game/constants":"CPW7"}],"AWBT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.restoreBackground=exports.drawBackground=void 0;var e=require("../sprite/sprites"),r=require("../utils/units"),t=require("../stage/stage"),s=function(e){};exports.drawBackground=s;var o=function(){t.STAGE_CTX.drawImage(t.hiddenStage,0,0)};exports.restoreBackground=o;
},{"../sprite/sprites":"CdRP","../utils/units":"Ajd9","../stage/stage":"ANqD"}],"r8ty":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPlayer=void 0;var t=require("../sprite/sprites"),i=require("../utils/units"),e=require("../utils/vector"),o=require("../stage/stage"),n=function(n){return{inventory:n,position:[0,5],origin:[0,5],moves:0,direction:e.V_EAST,draw:function(){(0,t.drawSprite)(o.STAGE_CTX,t.PLAYER_SPRITE_MAP[this.direction],this.getWorldPosition())},getWorldPosition:function(){return this.position.map(function(t){return(0,i.getUnit)(t)})},update:function(){this.draw(),this.inventory.draw()},isFull:function(){return null!==this.item},move:function(t,i){if((0,e.equals)(i,this.direction)){var o=(0,e.addVector)(this.position,i);t.canMoveToPosition(o)&&(this.direction=i,this.position=o)}else this.direction=i},pickup:function(t){var i=(0,e.addVector)(this.position,this.direction),o=t.getEntityAt(i);null!==o&&o.canPickup()&&(t.removeEntityAt(i),this.inventory.addItem(o))},place:function(t){var i=(0,e.addVector)(this.position,this.direction),o=n.getItem();t.canMoveToPosition(i)&&null!==o&&(t.addEntityAt(i,o),this.inventory.removeItem())}}};exports.createPlayer=n;
},{"../sprite/sprites":"CdRP","../utils/units":"Ajd9","../utils/vector":"XvJ1","../stage/stage":"ANqD"}],"KU3U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityManager=void 0;var t=require("../utils/vector"),e=function(){var e={entities:[],addEntity:function(t){this.entities.push(t)},update:function(){this.entities.forEach(function(t){return t.draw()})},getEntityAt:function(e){return this.entities.find(function(i){return(0,t.equals)(e,i.position)})}};return e};exports.EntityManager=e;
},{"../utils/vector":"XvJ1"}],"G0uM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tile=void 0;var e=function(e,t,i){return{position:[e,t],entities:i}};exports.tile=e;
},{}],"71XU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createItem=void 0;var t=require("../sprite/sprites"),r=require("../stage/stage");function e(t,r){return o(t)||n(t,r)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(t,r){var e=[],i=!0,n=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done)&&(e.push(a.value),!r||e.length!==r);i=!0);}catch(s){n=!0,o=s}finally{try{i||null==u.return||u.return()}finally{if(n)throw o}}return e}function o(t){if(Array.isArray(t))return t}var a=function(i,n){return{position:n,id:i,place:function(t){var r=e(t,2),i=r[0],n=r[1];this.position=[i,n],this.draw()},draw:function(){(0,t.drawSprite)(r.STAGE_CTX,this.id,this.position)},canPickup:function(){switch(this.id){case t.S_POT:return!0;default:return!1}}}};exports.createItem=a;
},{"../sprite/sprites":"CdRP","../stage/stage":"ANqD"}],"SFgd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createLevel=void 0;var t=require("./tile"),e=require("../sprite/sprites"),r=require("../items/item"),i=require("../stage/stage"),n=require("../utils/units");function u(t,e){return l(t)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var r=[],i=!0,n=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(l){n=!0,u=l}finally{try{i||null==a.return||a.return()}finally{if(n)throw u}}return r}function l(t){if(Array.isArray(t))return t}var s=function(){return{resolution:[4,4],currentState:null,cachedState:null,load:function(t,e){this.cachedState=this.createState(t),this.currentState=this.createState(e)},createState:function(i){for(var n=[],u=0;u<this.resolution[1];u++){for(var o=0;o<this.resolution[0];o++){var a=i[u*this.resolution[1]+o],l=[o,u],s=[];void 0===n[o]&&(n[o]=[]),a!==e.S_GROUND&&s.push((0,r.createItem)(e.S_GROUND,l)),s.push((0,r.createItem)(a,l)),n[o][u]=(0,t.tile)(o,u,s),0}0}return n},getEntityAt:function(t){var e=u(t,2),r=e[0],i=e[1],n=this.getTileAt([r,i]);if(null===n)return null;var o=n.entities[n.entities.length-1];return void 0===o?null:o},getTileAt:function(t){var e=u(t,2),r=e[0],i=e[1],n=this.currentState[r][i];return void 0===this.currentState[r]?null:void 0===this.currentState[r][i]?null:n},removeEntityAt:function(t){var e=this.getTileAt(t);if(null===e)return null;e.entities.pop()},addEntityAt:function(t,e){var r=this.getTileAt(t);null!==r&&r.entities.push(e)},canMoveToPosition:function(t){var r=u(t,2),i=r[0],n=r[1],o=this.getEntityAt([i,n]);if(null===o)return!1;switch(o.id){case e.S_WALL:case e.S_POT:return!1;default:return!0}},iterate:function(t,e){for(var r=0;r<this.resolution[0];r++)for(var i=0;i<this.resolution[1];i++)e(t[r][i])},draw:function(){i.STAGE_CTX.fillStyle="#472d3c",i.STAGE_CTX.fillRect(0,0,i.hiddenStage.width,i.hiddenStage.height),this.iterate(this.currentState,function(t){t.entities.forEach(function(r){(0,e.drawSprite)(i.STAGE_CTX,r.id,(0,n.getUnit)(t.position))})}),console.log(this.currentState)}}};exports.createLevel=s;
},{"./tile":"G0uM","../sprite/sprites":"CdRP","../items/item":"71XU","../stage/stage":"ANqD","../utils/units":"Ajd9"}],"Nj4q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInventory=void 0;var t=require("../utils/units"),e=require("../sprite/sprites"),i=require("../stage/stage"),s=function(){return{item:null,slotPosition:[0,4],addItem:function(t){null!==this.item?(this.item.place(t.position),this.item=t):this.item=t},draw:function(){(0,e.drawSprite)(i.STAGE_CTX,e.S_INVENTORY_SLOT,(0,t.getUnit)(this.slotPosition)),null!==this.item&&(this.item.position=(0,t.getUnit)(this.slotPosition),this.item.draw())},getItem:function(){return this.item},removeItem:function(){this.item=null}}};exports.createInventory=s;
},{"../utils/units":"Ajd9","../sprite/sprites":"CdRP","../stage/stage":"ANqD"}],"Focm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.entityManager=void 0;var e=require("./background/background"),t=require("./game/constants"),r=require("./stage/stage"),n=require("./sprite/sprites"),i=require("./actors/player"),a=require("./managers/entityManager"),o=require("./grid/level"),u=require("./inventory/inventory"),c=new a.EntityManager;exports.entityManager=c;var d=(0,o.createLevel)(),s=(0,u.createInventory)(),g=(0,i.createPlayer)(s),l=function(){r.STAGE_CTX.fillStyle="black",r.STAGE_CTX.fillRect(0,0,stage.width,stage.height),g.position=[1,1],n.SPRITE_REF.addEventListener("load",function(){d.load([1,1,1,1,1,0,0,1,1,0,9,1,1,1,1,1],[1,1,1,1,1,0,0,1,1,0,9,1,1,1,1,1]),(0,e.drawBackground)(d),v()})},v=function(e){r.STAGE_CTX.clearRect(0,0,stage.width,stage.height),d.draw(),g.update()},y=[];y[65]=function(){return g.move(d,t.DIRECTION_LEFT)},y[83]=function(){return g.move(d,t.DIRECTION_DOWN)},y[87]=function(){return g.move(d,t.DIRECTION_UP)},y[68]=function(){return g.move(d,t.DIRECTION_RIGHT)},y[69]=function(){null===s.getItem()?g.pickup(d):g.place(d)},window.addEventListener("keydown",function(e){void 0!==y[e.keyCode]&&(y[e.keyCode](),v())}),l();
},{"./background/background":"AWBT","./game/constants":"CPW7","./stage/stage":"ANqD","./sprite/sprites":"CdRP","./actors/player":"r8ty","./managers/entityManager":"KU3U","./grid/level":"SFgd","./inventory/inventory":"Nj4q"}]},{},["Focm"], null)</script>
</body></html>